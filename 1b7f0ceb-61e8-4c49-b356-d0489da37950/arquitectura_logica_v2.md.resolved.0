# Arquitectura L√≥gica del Anteproyecto (Versi√≥n 2: Granular)

Este documento representa la versi√≥n enriquecida (V2) de la arquitectura l√≥gica de tu anteproyecto. Fue generada tras una lectura **granular e iterativa (lectura en bloques de 250 l√≠neas)** de [Plantilla.tex](file:///c:/Users/jandr/OneDrive/Documentos/dev/Anteproyecto-maestria-uao/Plantilla.tex), extrayendo detalles m√°s profundos sobre la teor√≠a (Text-to-graph, AgentOps, sesgos de LLM-as-a-judge) y la metodolog√≠a (variables de control, ontolog√≠a preliminar de la fase 1).

---

## 1. Topolog√≠a L√≥gica Enriquecida (Grafo Mermaid V2)

Este diagrama mejora el anterior al incorporar los "Zettels de Alta Resoluci√≥n" capturados en las secciones del Marco Te√≥rico y Dise√±o Metodol√≥gico.

```mermaid
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#ffffff', 'edgeLabelBackground':'#f4f4f4', 'tertiaryColor': '#f4f4f4', 'fontFamily': 'Inter, sans-serif'}}}%%
flowchart TD
    %%------------------------------------%%
    %% DEFINICI√ìN DE CLASES Y ESTILOS     %%
    %%------------------------------------%%
    classDef fin fill:#e0f2fe,stroke:#0284c7,stroke-width:2px,color:#0c4a6e;
    classDef problema fill:#fee2e2,stroke:#dc2626,stroke-width:2px,color:#7f1d1d;
    classDef objetivo fill:#dcfce7,stroke:#16a34a,stroke-width:2px,color:#14532d;
    classDef metodo fill:#fef9c3,stroke:#ca8a04,stroke-width:2px,color:#713f12;
    classDef tecnologia fill:#f3e8ff,stroke:#9333ea,stroke-width:2px,color:#581c87,stroke-dasharray: 5 5;
    classDef output fill:#f1f5f9,stroke:#64748b,stroke-width:1px,color:#0f172a;
    classDef zettel fill:#ffffff,stroke:#94a3b8,stroke-width:1px,stroke-dasharray: 3 3;

    %%------------------------------------%%
    %% CAPA 1: FIN Y PROP√ìSITO GENERAL     %%
    %%------------------------------------%%
    subgraph CapaTeleologica ["1. FIN / PROP√ìSITO (Marco L√≥gico)"]
        direccion(TB)
        Q[Pregunta: ¬øC√≥mo la Ing. de Contexto reduce inconsistencias l√≥gicas?]:::fin
        OG[Objetivo General: Prototipo Copiloto Ag√©ntico (KG+SLM)]:::fin
        Q --> OG
    end

    %%------------------------------------%%
    %% CAPA 2: SITUACI√ìN PROBLEMA          %%
    %%------------------------------------%%
    subgraph CapaProblema ["2. PROBLEMA Y JUSTIFICACI√ìN GR√ÅNULAR"]
        direccion(TB)
        P1[Fisuras metodol√≥gicas en docs extensos]:::problema
        P2[Amnesia Contextual y RAG insuficiente]:::problema
        P3[Sesgo estil√≠stico en \nLLM-as-a-Judge]:::problema
        OG -. "Resuelve" .-> P1
        P2 --- Z1(((ZETTEL: \nRAG da factualidad, \nno consistencia l√≥gica.))):::zettel
        P3 --- Z2(((ZETTEL: \nEvaluar con 1 LLM \nsesga el resultado.))):::zettel
    end

    %%------------------------------------%%
    %% CAPA 3: TECNOLOG√çA ENVOLVENTE       %%
    %%------------------------------------%%
    subgraph CapaTecnologica ["3. CAPA TECNOL√ìGICA (Variables Independientes)"]
        KG[Grafos Conocimiento \n(Memoria Estructurada expl√≠cita)]:::tecnologia
        SLM[SLMs: Extractores \nText-to-Graph]:::tecnologia
        AGENTES[Sistema Ag√©ntico: M√≥dulos \nde Lectura y Verificaci√≥n]:::tecnologia
        
        KG --- Z3(((ZETTEL: \nPermiten inferencia \nMultihop eficiente.))):::zettel
        SLM --- Z4(((ZETTEL: \nBajo costo para poblar \nel grafo iterativamente.))):::zettel
        AGENTES --- Z5(((ZETTEL: \nAgentOps ligero, coordinaci√≥n \nsin reemplazar humano.))):::zettel

        %% V√≠nculos tecnol√≥gicos transversales a capas
        KG -. "Soluciona" .-> P2
        KG -. "Mitiga" .-> P3
        SLM -. "Alimenta" .-> KG
        AGENTES -. "Razona sobre" .-> KG
    end

    %%------------------------------------%%
    %% CAPA 4: COMPONENTES METODOL√ìGICOS   %%
    %%------------------------------------%%
    subgraph CapaMetodologia ["4. ENVOLVENTE METODOL√ìGICO (Variables Dependientes y Fases)"]
        direccion(TB)
        V[Control: Complejidad acotada <br> Dependiente: Coherencia Sem√°ntica]:::output
        
        O1[O.E.1: Analizar \nestructuras]:::objetivo
        O2[O.E.2: Dise√±ar \nmodelo sem√°ntico]:::objetivo
        O3[O.E.3: Implementar \narquitectura]:::objetivo
        O4[O.E.4: Validar \ndesempe√±o]:::objetivo

        F1[Fase 1: Taxonom√≠a y \nOntolog√≠a Preliminar]:::metodo
        F2[Fase 2: Grafo OWL/RDF \n(Neo4j)]:::metodo
        F3[Fase 3: Flujos de \nAgentes (UML/BPMN)]:::metodo
        F4[Fase 4: Desarrollo \nPrototipo]:::metodo
        F5[Fase 5: Eval MLOps \ny Likert experto]:::metodo

        %% Relaci√≥n Objetivos -> Fases
        V -. "Condiciona" .-> F4
        O1 --> F1
        O2 --> F2
        O3 --> F3
        O3 --> F4
        O4 --> F5
    end

    %%------------------------------------%%
    %% CONEXIONES CASCADA CROSS-CAPAS      %%
    %%------------------------------------%%
    OG --> CapaMetodologia
    
    %% La tecnolog√≠a instrumentaliza la metodolog√≠a
    KG -. "Fundamenta" .-> F2
    SLM -. "Soporta extracci√≥n en" .-> F4
    AGENTES -. "Ejecuta en" .-> F5
    
    %% Fases afectan problema
    F5 -. "Mide mitigaci√≥n frente a" .-> P1
```

---

## 2. Auditor√≠a de Coherencia V2 (An√°lisis Fino)

Gracias a la lectura pormenorizada de tu documento (incluyendo tu marco te√≥rico, dise√±o experimental cuasi-experimental y consideraciones de AgentOps), la perspectiva de los "vac√≠os" se refina significativamente.

### ‚úÖ 2.1 Insights Positivos (S√∫per Poderes de tu Documento)
1. **El "Grounding" Te√≥rico (Text-to-Graph):** En la lectura profunda encontr√© que tu documento **s√≠ menciona expl√≠citamente** que los SLM est√°n "optimizados para la traducci√≥n de texto natural a formatos estructurados (Text-to-Graph)" (Cap√≠tulo de Problema). *Esto justifica matem√°ticamente la inclusi√≥n del SLM: est√°n all√≠ para poblar el KG salvando costos.*
2. **Defensa contra "LLM-as-a-Judge":** Tu secci√≥n de evaluaci√≥n ag√©ntica admite que utilizar un solo juez LLM introduce sesgos estil√≠sticos. Al usar **KG + Agentes**, tu propuesta no solo verifica coherencia base, sino que usa el Grafo para medir hechos l√≥gicos, mitigando el sesgo del LLM. Es un argumento defensivo brutal para la sustentaci√≥n.
3. **El alcance acotado (Variables de Control):** Tienes muy claro que no es un producto en "producci√≥n" total (MLOps ligero) y acotas por tipo de documento y complejidad. Eso hace factible tu Fase 5 ("Dise√±o Cuasi-Experimental").

### ‚ö†Ô∏è 2.2 Alertas Metodol√≥gicas Finas (Accionables a corregir en [Plantilla.tex](file:///c:/Users/jandr/OneDrive/Documentos/dev/Anteproyecto-maestria-uao/Plantilla.tex))

Al leer capa por capa, identifiqu√© discordancias finas entre tus conceptos te√≥ricos brillantes y c√≥mo redactaste los "Objetivos o Fases".

> [!WARNING] Alerta de Precisi√≥n 1: Ausencia del "SLM" en el Objetivo Espec√≠fico 2
> **Hallazgo:** Explicas maravillosamente en el planteamiento que el "SLM es el extractor natural hacia el grafo". Sin embargo, tu **O.E.2 dice:** *"Dise√±ar un modelo sem√°ntico-ontol√≥gico implementado como KG..."*.
> **Correcci√≥n Sugerida:** El O.E.2 o la Fase 2 deber√≠an mencionar que el dise√±o conceptual debe contemplar los par√°metros / prompts / formato que usar√°n los SLM para inyectar datos (Relation Extraction). 

> [!TIP] Alerta de Precisi√≥n 2: La Ontolog√≠a de Fase 1
> **Hallazgo (Mitigado):** En mi anterior revisi√≥n, cre√≠ que la Fase 1 era abstracta. Tras la lectura profunda, vi que en la Fase 1 prometes una "taxonom√≠a base y ontolog√≠a preliminar" (L√≠nea 606). ¬°Esto es excelente!
> **Correcci√≥n Sugerida:** Aseg√∫rate de que, en el texto donde detallas la Fase 1, se diga que esta "ontolog√≠a preliminar" consistir√° en **Heur√≠sticas Automatizables** (propiedades que un Cypher query pueda consultar luego en la Fase 5 para el Multihop reasoning).

> [!IMPORTANT] Alerta Cr√≠tica 3: "La Memoria" vs "La Edici√≥n en Vivo"
> **Hallazgo:** Tu marco te√≥rico habla de la **Actualizaci√≥n eficiente de estados** (L√≠nea 506) en los sistemas ag√©nticos. Sin embargo, no hay ni un solo punto en la Fase 3 o Fase 4 que hable de: *"¬øQu√© pasa si el investigador borra un p√°rrafo del documento porque cambi√≥ de opini√≥n?"*.
> **Correcci√≥n Sugerida:** Si el KG es un "Ground Truth din√°mico", debes agregar expl√≠citamente en la Fase 4 un hito o flujo de **"Mecanismo de Invalidaci√≥n o Actualizaci√≥n de Nodos"**. Si el usuario edita, el Agente debe borrar o recargar ese Zettel en el KG. Si no lo escribes ahora, un jurado preguntar√° c√≥mo manejas el "des-aprendizaje" en el Grafo durante la escritura.

### üí° Conclusi√≥n de la Iteraci√≥n
Esta V2 demuestra que tu anteproyecto tiene un cimiento bibliogr√°fico y tecnol√≥gico casi inquebrantable (Docpilot, MMA-RAG, Multihop con KG). El marco te√≥rico soporta perfectamente el experimento. **Los ajustes que necesitas hacer en [Plantilla.tex](file:///c:/Users/jandr/OneDrive/Documentos/dev/Anteproyecto-maestria-uao/Plantilla.tex) son puramente de "Alineaci√≥n de Promesa"**: Aseg√∫rate de que los detalles brillantes que tienes en la "Introducci√≥n" y "Marco Te√≥rico" aterricen expl√≠citamente en el texto descriptivo de las "Fases (1 a la 5)" para que tu jurado vea el mapa completo sin ambig√ºedades.
